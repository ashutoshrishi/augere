module.exports = function (title, query) {
    var Box = {};

    Box.title = title;
    Box.borderColor = query.colorID;
    Box.id = boxid;

    /* Default timeout is infinity (= -1). */
    /* timeout should be explicitely set by individual modules */
    if (query.timeout) {
        Box.timeout = query.timeout;
    } else {
        Box.timeout = -1;
    }


    Box.setContent = function (content) {
        Box.html = content;
    };

    boxid += 1;

    Box.html = "";
    Box.htmlStateChange = false;

    /* Methods */
    /* errorReport: function to write an error as the html body */
    Box.errorReport = function (error) {
        this.html = "<hr><strong>Error: </strong>" + $.text(error);
        this.htmlStateChange = true;
    };

    Box.appendListItem = function (title, body) {
        if (body) {
        this.html = this.html.concat("<hr><strong>" + title + "</strong>" +
                        "<br><small>" + body + "</small><hr>");
        } else {
            this.html = this.html.concat( "<hr>"+title + "<hr>");
        }
        this.htmlStateChange = true;
    };

    Box.linkify = function (link, text) {
        if (!text) text = link;
        return "<a href=\'" + link + "\'>" + text + "</a>";
    };

    return Box;
};
